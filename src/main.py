import os
import sys
sys.path.append(os.path.dirname(os.getcwd()))
from src.cromozom import Cromozom
from src.codification import coder
from src.selection.selector import Selector

if __name__ == '__main__':
#    1: 0000011101001001110001 x= -0,914592 f=0.24892945287918744
#    2: 0010100100111011111100 x= -0,516787 f=1.2161433551687346
#    3: 0100000001010010110111 x= -0,246207 f=1.69317538311855
#    4: 1101001110110001101101 x=  1,480791 f=1.288048141479274
#    5: 1001110010011100111001 x=  0,835307 f=2.1375690008662946
#    6: 1011111001000011000100 x=  1,229633 f=1.7176358177971365
#    7: 0110000010110000001111 x=  0,133068 f=2.115360642895274
#    8: 0000100011000110001010 x= -0,897179 f=0.29789055630549277
#    9: 0101110111101010011111 x=  0,100578 f=2.0904619502816644
#   10: 0011101010110110001001 x= -0,311975 f=1.590697249227337
#   11: 1100110111010010011111 x=  1,411980 f=1.4182933275624994
#   12: 0111011111100011000001 x=  0,404924 f=2.240960465910953
#   13: 1111110000100110000000 x=  1,954865 f=0.13336723106734194
#   14: 0111010000000010110010 x=  0,359503 f=2.230260491735224
#   15: 1100000001110111000101 x=  1,255452 f=1.6792930285557333
#   16: 1011010101010000001011 x=  1,124764 f=1.8596696522000606
#   17: 1101011110101101101011 x=  1,527482 f=1.1942809038290045
#   18: 1101101110100010011111 x=  1,573845 f=1.0968573281925882
#   19: 0010010101011001011110 x= -0,562311 f=1.1214962076226662
#   20: 1011101100000000100111 x=  1,191435 f=1.771918100644858
    values = [
        -0.914592,
        -0.516787,
        -0.246207,
        1.480791,
        0.835307,
        1.229633,
        0.133068,
        -0.897179,
        0.100578,
        -0.311975,
        1.411980,
        0.404924,
        1.954865,
        0.359503,
        1.255452,
        1.124764,
        1.527482,
        1.573845,
        -0.562311,
        1.191435
    ]
    lower_bound = -1
    upper_bound = 2
    precision = 6
    f = lambda x: -(x ** 2) + x + 2
    coder = coder.Coder(lower_bound, upper_bound, precision)
    binaries = [coder.encode(x)for x in values]
    fitnesses = [f(x) for x in values]
    population = [Cromozom(values[i], binaries[i], fitnesses[i]) for i in range(len(values))]

    print('Initial population:')
    for c in population:
        c.show()
    
    selector = Selector(population)
    selected = selector.select()

    print('\nSelected population:')
    for c in selected:
        c.show()
